/*

 jQuery Tools 3.2.3 / Flashembed - New wave Flash embedding

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/toolbox/flashembed.html

 Since : March 2008
 Date  : @DATE
*/
(function(){function t(a){if(!a||typeof a!="object")return a;var e=new a.constructor;for(var c in a)if(a.hasOwnProperty(c))e[c]=t(a[c]);return e}function p(a,e){if(a){var c,l=0,b=a.length;if(b===undefined)for(c in a){if(e.call(a[c],c,a[c])===false)break}else for(c=a[0];l<b&&e.call(c,l,c)!==false;c=a[++l]);return a}}function s(a,e,c){if(typeof e!="object")return a;a&&e&&p(e,function(l,b){if(!c||typeof b!="function")a[l]=b});return a}function F(a){var e=a.indexOf(".");if(e!=-1){var c=a.slice(0,e)||
"*",l=a.slice(e+1,a.length),b=[];p(document.getElementsByTagName(c),function(){this.className&&this.className.indexOf(l)!=-1&&b.push(this)});return b}}function G(a){a=a||window.event;if(a.preventDefault){a.stopPropagation();a.preventDefault()}else{a.returnValue=false;a.cancelBubble=true}return false}function y(a,e,c){a[e]=a[e]||[];a[e].push(c)}function A(){return"_"+(""+Math.random()).slice(2,10)}function z(a,e,c){function l(){function f(h){if(/iPad|iPhone/.test(navigator.userAgent)&&!/.flv$/i.test(k[0].url)&&
b.ipad===undefined)return true;!b.isLoaded()&&b._fireEvent("onBeforeClick")!==false&&b.load();return G(h)}if($f(a)){$f(a).getParent().innerHTML="";B=$f(a).getIndex();j[B]=b}else{j.push(b);B=j.length-1}J=parseInt(a.style.height,10)||a.clientHeight;C=a.id||"fp"+A();H=e.id||C+"_api";e.id=H;c.playerId=C;if(typeof c=="string")c={clip:{url:c}};if(typeof c.clip=="string")c.clip={url:c.clip};c.clip=c.clip||{};if(a.getAttribute("href",2)&&!c.clip.url)c.clip.url=a.getAttribute("href",2);i=new x(c.clip,-1,b);
c.playlist=c.playlist||[c.clip];var m=0;p(c.playlist,function(){var h=this;if(typeof h=="object"&&h.length)h={url:""+h};p(c.clip,function(o,u){if(u!==undefined&&h[o]===undefined&&typeof u!="function")h[o]=u});c.playlist[m]=h;h=new x(h,m,b);k.push(h);m++});p(c,function(h,o){if(typeof o=="function"){i[h]?i[h](o):y(r,h,o);delete c[h]}});p(c.plugins,function(h,o){if(o)q[h]=new d(h,o,b)});if(!c.plugins||c.plugins.controls===undefined)q.controls=new d("controls",null,b);q.canvas=new d("canvas",null,b);
g=a.innerHTML;setTimeout(function(){if(g.replace(/\s/g,"")!=="")if(a.addEventListener)a.addEventListener("click",f,false);else a.attachEvent&&a.attachEvent("onclick",f);else{a.addEventListener&&a.addEventListener("click",G,false);b.load()}},0)}var b=this,n=null,w=false,g,i,k=[],q={},r={},C,H,B,K,L,J;s(b,{id:function(){return C},isLoaded:function(){return n!==null&&n.fp_play!==undefined&&!w},getParent:function(){return a},hide:function(f){if(f)a.style.height="0px";if(b.isLoaded())n.style.height="0px";
return b},show:function(){a.style.height=J+"px";if(b.isLoaded())n.style.height=L+"px";return b},isHidden:function(){return b.isLoaded()&&parseInt(n.style.height,10)===0},load:function(f){if(!b.isLoaded()&&b._fireEvent("onBeforeLoad")!==false){var m=0;p(j,function(){this.unload(function(){if(++m==j.length){if((g=a.innerHTML)&&!flashembed.isSupported(e.version))a.innerHTML="";flashembed(a,e,{config:c});if(f){f.cached=true;y(r,"onLoad",f)}}})})}return b},unload:function(f){if(this.isFullscreen()&&/WebKit/i.test(navigator.userAgent)){f&&
f(false);return b}if(g.replace(/\s/g,"")!==""){if(b._fireEvent("onBeforeUnload")===false){f&&f(false);return b}w=true;try{if(n){n.fp_close();b._fireEvent("onUnload")}}catch(m){}setTimeout(function(){n=null;a.innerHTML=g;w=false;f&&f(true)},50)}else f&&f(false);return b},getClip:function(f){if(f===undefined)f=K;return k[f]},getCommonClip:function(){return i},getPlaylist:function(){return k},getPlugin:function(f){var m=q[f];if(!m&&b.isLoaded()){var h=b._api().fp_getPlugin(f);if(h){m=new d(f,h,b);q[f]=
m}}return m},getScreen:function(){return b.getPlugin("screen")},getControls:function(){return b.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return b.getPlugin("logo")._fireEvent("onUpdate")}catch(f){}},getPlay:function(){return b.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(f){return f?t(c):c},getFlashParams:function(){return e},loadPlugin:function(f,m,h,o){if(typeof h=="function"){o=h;h={}}var u=o?A():"_";b._api().fp_loadPlugin(f,m,h,u);m={};m[u]=o;o=new d(f,
null,b,m);return q[f]=o},getState:function(){return b.isLoaded()?n.fp_getState():-1},play:function(f,m){var h=function(){f!==undefined?b._api().fp_play(f,m):b._api().fp_play()};if(b.isLoaded())h();else w?setTimeout(function(){b.play(f,m)},50):b.load(function(){h()});return b},getVersion:function(){if(b.isLoaded()){var f=n.fp_getVersion();f.push("flowplayer.js 3.2.3");return f}return"flowplayer.js 3.2.3"},_api:function(){if(!b.isLoaded())throw"Flowplayer "+b.id()+" not loaded when calling an API method";
return n},setClip:function(f){b.setPlaylist([f]);return b},getIndex:function(){return B}});p("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var f="on"+this;if(f.indexOf("*")!=-1){f=f.slice(0,f.length-1);var m="onBefore"+f.slice(2);b[m]=function(h){y(r,m,h);return b}}b[f]=function(h){y(r,f,h);return b}});p("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),
function(){var f=this;b[f]=function(m,h){if(!b.isLoaded())return b;var o=null;o=m!==undefined&&h!==undefined?n["fp_"+f](m,h):m===undefined?n["fp_"+f]():n["fp_"+f](m);return o==="undefined"||o===undefined?b:o}});b._fireEvent=function(f){if(typeof f=="string")f=[f];var m=f[0],h=f[1],o=f[2],u=f[3],D=0;c.debug&&console.log("$f.fireEvent",[].slice.call(f));if(!b.isLoaded()&&m=="onLoad"&&h=="player"){n=n||document.getElementById(H);L=n.clientHeight;p(k,function(){this._fireEvent("onLoad")});p(q,function(M,
I){I._fireEvent("onUpdate")});i._fireEvent("onLoad")}if(!(m=="onLoad"&&h!="player")){if(m=="onError")if(typeof h=="string"||typeof h=="number"&&typeof o=="number"){h=o;o=u}if(m=="onContextMenu")p(c.contextMenu[h],function(M,I){I.call(b)});else if(m=="onPluginEvent"||m=="onBeforePluginEvent"){if(u=q[h.name||h]){u._fireEvent("onUpdate",h);return u._fireEvent(o,f.slice(3))}}else{if(m=="onPlaylistReplace"){k=[];var N=0;p(h,function(){k.push(new x(this,N++,b))})}if(m=="onClipAdd"){if(h.isInStream)return;
h=new x(h,o,b);k.splice(o,0,h);for(D=o+1;D<k.length;D++)k[D].index++}var E=true;if(typeof h=="number"&&h<k.length){K=h;if(f=k[h])E=f._fireEvent(m,o,u);if(!f||E!==false)E=i._fireEvent(m,o,u,f)}p(r[m],function(){E=this.call(b,h,o);this.cached&&r[m].splice(D,1);if(E===false)return false;D++});return E}}};typeof a=="string"?flashembed.domReady(function(){var f=document.getElementById(a);if(f){a=f;l()}else throw"Flowplayer cannot access element: "+a;}):l()}function v(a){this.length=a.length;this.each=
function(e){p(a,e)};this.size=function(){return a.length}}var x=function(a,e,c){var l=this,b={},n={};l.index=e;if(typeof a=="string")a={url:a};s(this,a,true);p("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var g="on"+this;if(g.indexOf("*")!=-1){g=g.slice(0,g.length-1);var i="onBefore"+g.slice(2);l[i]=function(k){y(n,i,k);return l}}l[g]=function(k){y(n,g,k);return l};if(e==-1){if(l[i])c[i]=l[i];if(l[g])c[g]=l[g]}});s(this,
{onCuepoint:function(g,i){if(arguments.length==1){b.embedded=[null,g];return l}if(typeof g=="number")g=[g];var k=A();b[k]=[g,i];c.isLoaded()&&c._api().fp_addCuepoints(g,e,k);return l},update:function(g){s(l,g);c.isLoaded()&&c._api().fp_updateClip(g,e);var i=c.getConfig();s(e==-1?i.clip:i.playlist[e],g,true)},_fireEvent:function(g,i,k,q){if(g=="onLoad"){p(b,function(H,B){B[0]&&c._api().fp_addCuepoints(B[0],e,H)});return false}q=q||l;if(g=="onCuepoint"){var r=b[i];if(r)return r[1].call(c,q,k)}if(i&&
"onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(g)!=-1){s(q,i);if(i.metaData)if(q.duration)q.fullDuration=i.metaData.duration;else q.duration=i.metaData.duration}var C=true;p(n[g],function(){C=this.call(c,q,i,k)});return C}});if(a.onCuepoint){var w=a.onCuepoint;l.onCuepoint.apply(l,typeof w=="function"?[w]:w);delete a.onCuepoint}p(a,function(g,i){if(typeof i=="function"){y(n,g,i);delete a[g]}});if(e==-1)c.onCuepoint=this.onCuepoint},d=function(a,e,c,l){var b=this,n={},w=false;l&&s(n,
l);p(e,function(g,i){if(typeof i=="function"){n[g]=i;delete e[g]}});s(this,{animate:function(g,i,k){if(!g)return b;if(typeof i=="function"){k=i;i=500}if(typeof g=="string"){var q=g;g={};g[q]=i;i=500}if(k){var r=A();n[r]=k}if(i===undefined)i=500;e=c._api().fp_animate(a,g,i,r);return b},css:function(g,i){if(i!==undefined){var k={};k[g]=i;g=k}e=c._api().fp_css(a,g);s(b,e);return b},show:function(){this.display="block";c._api().fp_showPlugin(a);return b},hide:function(){this.display="none";c._api().fp_hidePlugin(a);
return b},toggle:function(){this.display=c._api().fp_togglePlugin(a);return b},fadeTo:function(g,i,k){if(typeof i=="function"){k=i;i=500}if(k){var q=A();n[q]=k}this.display=c._api().fp_fadeTo(a,g,i,q);this.opacity=g;return b},fadeIn:function(g,i){return b.fadeTo(1,g,i)},fadeOut:function(g,i){return b.fadeTo(0,g,i)},getName:function(){return a},getPlayer:function(){return c},_fireEvent:function(g,i){if(g=="onUpdate"){var k=c._api().fp_getPlugin(a);if(!k)return;s(b,k);delete b.methods;if(!w){p(k.methods,
function(){var q=""+this;b[q]=function(){var r=[].slice.call(arguments);r=c._api().fp_invoke(a,q,r);return r==="undefined"||r===undefined?b:r}});w=true}}if(k=n[g]){k=k.apply(b,i);g.slice(0,1)=="_"&&delete n[g];return k}return b}})},j=[];window.flowplayer=window.$f=function(){var a=null,e=arguments[0];if(!arguments.length){p(j,function(){if(this.isLoaded()){a=this;return false}});return a||j[0]}if(arguments.length==1)if(typeof e=="number")return j[e];else{if(e=="*")return new v(j);p(j,function(){if(this.id()==
e.id||this.id()==e||this.getParent()==e){a=this;return false}});return a}if(arguments.length>1){var c=arguments[1],l=arguments.length==3?arguments[2]:{};if(typeof c=="string")c={src:c};c=s({bgcolor:"#000000",version:[9,0],expressInstall:"http://static.flowplayer.org/swf/expressinstall.swf",cachebusting:true},c);if(typeof e=="string")if(e.indexOf(".")!=-1){var b=[];p(F(e),function(){b.push(new z(this,t(c),t(l)))});return new v(b)}else{var n=document.getElementById(e);return new z(n!==null?n:e,c,l)}else if(e)return new z(e,
c,l)}return null};s(window.$f,{fireEvent:function(){var a=[].slice.call(arguments),e=$f(a[0]);return e?e._fireEvent(a.slice(1)):null},addPlugin:function(a,e){z.prototype[a]=e;return $f},each:p,extend:s});if(typeof jQuery=="function")jQuery.fn.flowplayer=function(a,e){if(!arguments.length||typeof arguments[0]=="number"){var c=[];this.each(function(){var l=$f(this);l&&c.push(l)});return arguments.length?c[arguments[0]]:new v(c)}return this.each(function(){$f(this,t(a),e?t(e):{})})}})();
(function(){function t(d,j){if(j)for(var a in j)if(j.hasOwnProperty(a))d[a]=j[a];return d}function p(d,j){var a=[];for(var e in d)if(d.hasOwnProperty(e))a[e]=j(d[e]);return a}function s(d,j,a){if(v.isSupported(j.version))d.innerHTML=v.getHTML(j,a);else if(j.expressInstall&&v.isSupported([6,65]))d.innerHTML=v.getHTML(t(j,{src:j.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else{if(!d.innerHTML.replace(/\s/g,"")){d.innerHTML="<h2>Flash version "+j.version+
" or greater is required</h2><h3>"+(x[0]>0?"Your version is "+x:"You have no flash plugin installed")+"</h3>"+(d.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+G+"'>here</a></p>");if(d.tagName=="A")d.onclick=function(){location.href=G}}if(j.onFail){var e=j.onFail.call(this);if(typeof e=="string")d.innerHTML=e}}if(F)window[j.id]=document.getElementById(j.id);t(this,{getRoot:function(){return d},getOptions:function(){return j},getConf:function(){return a},
getApi:function(){return d.firstChild}})}var F=document.all,G="http://www.adobe.com/go/getflashplayer",y=typeof jQuery=="function",A=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,z={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:true,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:false,cachebusting:false};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}});
window.flashembed=function(d,j,a){if(typeof d=="string")d=document.getElementById(d.replace("#",""));if(d){if(typeof j=="string")j={src:j};return new s(d,t(t({},z),j),a)}};var v=t(window.flashembed,{conf:z,getVersion:function(){var d;try{d=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(j){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");d=a&&a.GetVariable("$version")}catch(e){}}return(d=A.exec(d))?[d[1],d[3]]:[0,0]},asString:function(d){if(d===null||d===undefined)return null;
var j=typeof d;if(j=="object"&&d.push)j="array";switch(j){case "string":d=d.replace(RegExp('(["\\\\])',"g"),"\\$1");d=d.replace(/^\s?(\d+\.?\d+)%/,"$1pct");return'"'+d+'"';case "array":return"["+p(d,function(e){return v.asString(e)}).join(",")+"]";case "function":return'"function()"';case "object":j=[];for(var a in d)d.hasOwnProperty(a)&&j.push('"'+a+'":'+v.asString(d[a]));return"{"+j.join(",")+"}"}return String(d).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(d,j){d=t({},d);var a='<object width="'+
d.width+'" height="'+d.height+'" id="'+d.id+'" name="'+d.id+'"';if(d.cachebusting)d.src+=(d.src.indexOf("?")!=-1?"&":"?")+Math.random();a+=d.w3c||!F?' data="'+d.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';a+=">";if(d.w3c||F)a+='<param name="movie" value="'+d.src+'" />';d.width=d.height=d.id=d.w3c=d.src=null;d.onFail=d.version=d.expressInstall=null;for(var e in d)if(d[e])a+='<param name="'+e+'" value="'+d[e]+'" />';e="";if(j){for(var c in j)if(j[c]){var l=
j[c];e+=c+"="+(/function|object/.test(typeof l)?v.asString(l):l)+"&"}e=e.slice(0,-1);a+='<param name="flashvars" value=\''+e+"' />"}a+="</object>";return a},isSupported:function(d){return x[0]>d[0]||x[0]==d[0]&&x[1]>=d[1]}}),x=v.getVersion();if(y){jQuery.tools=jQuery.tools||{version:"3.2.3"};jQuery.tools.flashembed={conf:z};jQuery.fn.flashembed=function(d,j){return this.each(function(){$(this).data("flashembed",flashembed(this,d,j))})}}})();
