jQuery(document).ready(function(){jQuery("a[rel=modal]").tangobox();jQuery("a[rel=modalImage]").tangobox()});
(function(a){a.fn.tangobox=function(c){function D(){if(!p){r=this;a.isFunction(c.callbackOnStart)&&c.callbackOnStart();a("#tbOverlay").length||a('<div id="tbOverlay"></div> \t\t\t\t\t\t\t\t<div id="tbWrap"> \t\t\t\t\t\t\t\t\t<div id="tbOuter"> \t\t\t\t\t\t\t\t\t\t<div id="tbInner"> \t\t\t\t\t\t\t\t\t\t\t<div id="tbContent"></div> \t\t\t\t\t\t\t\t\t\t\t<div id="tbNav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="" id="tbNavPrev"></a> \t\t\t\t\t\t\t\t\t\t\t\t<a href="" id="tbNavNext"></a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<div id="tbMeta"></div> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div>').appendTo("body");d=
a("#tbOuter");k=a("#tbContent");l=a("#tbMeta");if(c.overlayShow){var b={backgroundColor:c.overlayColor};if(jQuery.support.opacity)b.opacity=c.overlayOpacity;else b.filter="alpha(opacity="+c.overlayOpacity*100+")";a("#tbOverlay").css(b).fadeIn(200)}else a("tbOverlay").hide();if(a(r).hasClass("tbNoSlideshow")){v=1;n=[r]}for(b=0;b<v;b++){g[b]={elem:n[b],href:a(n[b]).attr("href"),title:a(n[b]).attr("title"),alt:a(n[b]).find("> img").attr("alt"),rel:a(n[b]).attr("rel")};if(g[b].href==a(r).attr("href"))e=
b}if(c.displayMeta)t=g.length>1||g[0].alt||g[0].title;u();c.slideshowAutostart&&z()}return false}function z(){if(c.slideshowDelay<=0)return false;q=setInterval(function(){if(!p){if(e==v-1)e=0;else++e;u()}},c.slideshowDelay);return true}function A(){clearInterval(q);q=null}function u(){if(p)return false;p=true;var b=g[e],o=b.alt||b.title||"";a("#tbNavPrev, #tbNavNext, #tbClose, #tbMeta").hide();d.is(":visible")===false&&d.css("top","120px").show();d.addClass("inProgress");if(b.href.match(/#/)){d.addClass("typeInline");
w(a(window.location.hash).html(),o,c.frameWidth,c.frameHeight)}else if(r.rel=="modalImage"||b.href.match(x)){d.addClass("typeImage");k.is(":visible")&&k.fadeOut();var h=new Image;h.onload=function(){var i=h.width,f=h.height,j=a(window).width()-120,m=a(window).height()-120;if(t)m-=l.outerHeight();if(c.imageScale&&(i>j||f>m)){j=Math.min(Math.min(j,i)/i,Math.min(m,f)/f);i=Math.round(j*i);f=Math.round(j*f)}w('<img alt="" id="tbImage" src="'+h.src+'" height="'+f+'" width="'+i+'">',o,i,f)};h.src=b.href}else{d.addClass("typeAjax");
a.get(b.href,function(i){for(var f={},j=b.elem.search.replace("?","").split("&"),m,s=j.length,y=0;y<s;y++){m=j[y].split("=");f[m[0]]=m[1]}w('<div id="tbInline">'+i+"</div>",o,f.width||c.frameWidth,f.height||c.frameHeight)})}return e}function w(b,o,h,i){h=parseInt(h);i=parseInt(i);var f=a(window).height(),j=a(window).scrollTop(),m=d.css("paddingTop").replace(/[^\d\.]/g,"")*2;f=f/2-(i+m)/2+j;var s=d.is(":visible")&&h==d.width()&&i==d.height()?{width:h}:{height:i+"px",width:h+"px"};if(t){f=f-l.outerHeight()/
2+"px";l.html('<p id="tbMetaTitle">'+o+"</p>");if(g.length>1){l.append('<p id="tbMetaInfo">Viewing '+(e+1)+" of "+g.length+"</p>");if(c.slideshowDelay){l.find("p:last").append(a('<span><a href="" id="tbMetaSlideshow">'+(q?"Stop":"Start")+" slideshow</a></span>"));l.find("p:last a").click(function(){if(q){a(this).html("Start slideshow");a("#tbNav").show();A()}else{a(this).html("Stop slideshow");a("#tbNav").hide();z()}return false})}}}else f+="px";if(f!==d.css("top")){s.top=f;d.is(":visible")==false&&
j!==0&&s.top.replace(/[^\d\.]/g,"")>j&&d.css("top",j+"px")}d.show();k.css("opacity",1).fadeOut("normal",function(){k.empty();k.html(a(b)).hide();d.animate(s,c.zoomSpeedIn,E)})}function E(){k.fadeIn("normal",function(){t?d.animate({height:d.height()+l.outerHeight()+"px"},c.zoomSpeedIn,function(){l.show();B()}):B()})}function B(){var b=[];if(g.length-1>e)b[0]=g[e+1];if(e>0)b[1]=g[e-1];for(var o in b){var h=b[o];if(h.rel=="modalImage"||h.href.match(x)){objNext=new Image;objNext.src=h.href}}if(g[e].rel==
"modalImage"||g[e].href.match(x)){e!==0&&a("#tbNavPrev").show().unbind().click(function(){--e;u();return false});e!==g.length-1&&a("#tbNavNext").show().unbind().click(function(){++e;u();return false})}q!=null&&a("#tbNav").hide();a(document).bind("keyup",C);k.bind("click",C);a("#tbOuter").removeClass("inProgress");a.isFunction(c.callbackOnShow)&&c.callbackOnShow(g[e]);p=false}function C(b){if(b.keyCode===27||b.button===0){A();a(document).unbind();k.unbind().empty().stop();d.stop().css({height:"250px",
width:"250px",top:"0"}).hide().removeAttr("class");a("#tbOverlay").fadeOut(c.zoomSpeedOut);a.isFunction(c.callbackOnClose)&&c.callbackOnClose(g[e]);p=false}}c=a.extend({imageScale:true,zoomOpacity:true,zoomSpeedIn:500,zoomSpeedOut:"slow",frameWidth:560,frameHeight:340,overlayShow:true,overlayOpacity:0.7,overlayColor:"#444",slideshowAutostart:false,slideshowDelay:5200,displayMeta:true,callbackOnStart:null,callbackOnShow:null,callbackOnClose:null},c);var n=this,r,v=n.length,t,g=[],e=0,p=false,q,x=/\.(jpe?g|gif|png)($|\?)?$/i,
d,k,l;return this.unbind("click").bind("click",D)}})(jQuery);
