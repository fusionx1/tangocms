/*
 * Zula Framework Module (Editor) Specific
 *
 * @author Alex Cartwright
 * @copyright Copyright (C) 2008, 2009 Alex Cartwright
 * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.html GNU/GPL 2
 * @package TangoCMS_Editor
 */
var editorShebangs=new Array();function editorJitShebang(b,a){if(a=="html"&&/^<p>#\!([A-Z0-9_\-]+)<\/p>/i.test(b)){return b.replace(/^<p>#\!([A-Z0-9_\-]+)<\/p>/i,"#!$1")}else{if(/^#\!([A-Z0-9_\-]+)/i.test(b)==false){return"#!"+a+"\n"+b}}}$(document).ready(function(){$("textarea.editor_body").each(function(a){var b=this;shebang=/^#\!([A-Z0-9_\-]+)/i.exec($(this).val());if(shebang==null){editorShebangs[a]=tcmEditor.defaultFormat.toLowerCase()}else{$(this).val(jQuery.trim($(this).val().replace(/^#\![A-Z0-9_\-]+/i,"")));editorShebangs[a]=shebang[1].toLowerCase()}if(editorShebangs[a]=="html"){$(this).addClass("tinymce")}$(this).parents("form").submit(function(){var c=editorShebangs.shift();if(c!="html"){$(b).val(editorJitShebang($(b).val(),c))}return true})})});if(typeof tinyMCE!=="undefined"){tinyMCE.init({mode:"specific_textareas",editor_selector:"tinymce",width:"100%",setup:function(a){a.onSubmit.add(function(b,c){b.setContent(editorJitShebang(b.getContent().replace(/<br><\/p>/i,"</p>"),"html"))})},document_base_url:zula_dir_base,convert_urls:false,relative_urls:false,cleanup_on_startup:true,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',element_format:"html",extended_valid_elements:"code,pre",fix_list_elements:true,fix_table_elements:true,fix_nesting:true,remove_trailing_nbsp:true,plugins:tcmEditor.tinymcePlugins,pagebreak_separator:"<!--break-->",inlinepopups_skin:"tcmPop",theme:"advanced",skin:"tcm",button_tile_map:true,theme_advanced_toolbar_align:"left",theme_advanced_toolbar_location:"top",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:true,theme_advanced_resize_horizontal:false,theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,bullist,numlist,blockquote,|,justifyleft,justifycenter,justifyright,|,image,link,unlink,|,pagebreak,undo,redo",theme_advanced_buttons2:"formatselect,fontsizeselect,forecolor,justifyfull,table,|,pastetext,pasteword,removeformat,|,media,charmap,|,outdent,indent,|,code,help",theme_advanced_buttons3:""})};