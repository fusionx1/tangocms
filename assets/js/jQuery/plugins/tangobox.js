jQuery(document).ready(function(){jQuery("a[rel=modal]").tangobox();jQuery("a[rel=modalImage]").tangobox()});
(function(a){a.fn.tangobox=function(c){function D(){if(!o){u=this;a.isFunction(c.callbackOnStart)&&c.callbackOnStart();a("#tbOverlay").length||a('<div id="tbOverlay"></div> \t\t\t\t\t\t\t\t<div id="tbWrap"> \t\t\t\t\t\t\t\t\t<div id="tbOuter"> \t\t\t\t\t\t\t\t\t\t<div id="tbInner"> \t\t\t\t\t\t\t\t\t\t\t<div id="tbContent"></div> \t\t\t\t\t\t\t\t\t\t\t<div id="tbNav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="" id="tbNavPrev"></a> \t\t\t\t\t\t\t\t\t\t\t\t<a href="" id="tbNavNext"></a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<div id="tbMeta"></div> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div>').appendTo("body");d=
a("#tbOuter");k=a("#tbContent");l=a("#tbMeta");if(c.overlayShow){var b={backgroundColor:c.overlayColor};if(jQuery.support.opacity)b.opacity=c.overlayOpacity;else b.filter="alpha(opacity="+c.overlayOpacity*100+")";a("#tbOverlay").css(b).fadeIn(200)}else a("tbOverlay").hide();for(b=0;b<y;b++){g[b]={elem:p[b],href:a(p[b]).attr("href"),title:a(p[b]).attr("title"),alt:a(p[b]).find("> img").attr("alt"),rel:a(p[b]).attr("rel")};if(g[b].href==a(u).attr("href"))e=b}if(c.displayMeta)s=g.length>1||g[0].alt||
g[0].title;t();c.slideshowAutostart&&z()}return false}function z(){if(c.slideshowDelay<=0)return false;q=setInterval(function(){if(!o){if(e==y-1)e=0;else++e;t()}},c.slideshowDelay);return true}function A(){clearInterval(q);q=null}function t(){if(o)return false;o=true;var b=g[e],n=b.alt||b.title||"";a("#tbNavPrev, #tbNavNext, #tbClose, #tbMeta").hide();d.is(":visible")===false&&d.css("top","120px").show();d.addClass("inProgress");if(b.href.match(/#/)){d.addClass("typeInline");v(a(window.location.hash).html(),
n,c.frameWidth,c.frameHeight)}else if(u.rel=="modalImage"||b.href.match(w)){d.addClass("typeImage");k.is(":visible")&&k.fadeOut();var h=new Image;h.onload=function(){var i=h.width,f=h.height,j=a(window).width()-120,m=a(window).height()-120;if(s)m-=l.outerHeight();if(c.imageScale&&(i>j||f>m)){j=Math.min(Math.min(j,i)/i,Math.min(m,f)/f);i=Math.round(j*i);f=Math.round(j*f)}v('<img alt="" id="tbImage" src="'+h.src+'" height="'+f+'" width="'+i+'">',n,i,f)};h.src=b.href}else{d.addClass("typeAjax");a.get(b.href,
function(i){for(var f={},j=b.elem.search.replace("?","").split("&"),m,r=j.length,x=0;x<r;x++){m=j[x].split("=");f[m[0]]=m[1]}v('<div id="tbInline">'+i+"</div>",n,f.width||c.frameWidth,f.height||c.frameHeight)})}return e}function v(b,n,h,i){h=parseInt(h);i=parseInt(i);var f=a(window).height(),j=a(window).scrollTop(),m=d.css("paddingTop").replace(/[^\d\.]/g,"")*2;f=f/2-(i+m)/2+j;var r=d.is(":visible")&&h==d.width()&&i==d.height()?{width:h}:{height:i+"px",width:h+"px"};if(s){f=f-l.outerHeight()/2+"px";
l.html('<p id="tbMetaTitle">'+n+"</p>");if(g.length>1){l.append('<p id="tbMetaInfo">Viewing '+(e+1)+" of "+g.length+"</p>");if(c.slideshowDelay){l.find("p:last").append(a('<span><a href="" id="tbMetaSlideshow">'+(q?"Stop":"Start")+" slideshow</a></span>"));l.find("p:last a").click(function(){if(q){a(this).html("Start slideshow");a("#tbNav").show();A()}else{a(this).html("Stop slideshow");a("#tbNav").hide();z()}return false})}}}else f+="px";if(f!==d.css("top")){r.top=f;d.is(":visible")==false&&j!==
0&&r.top.replace(/[^\d\.]/g,"")>j&&d.css("top",j+"px")}d.show();k.css("opacity",1).fadeOut("normal",function(){k.empty();k.html(a(b)).hide();d.animate(r,c.zoomSpeedIn,E)})}function E(){k.fadeIn("normal",function(){s?d.animate({height:d.height()+l.outerHeight()+"px"},c.zoomSpeedIn,function(){l.show();B()}):B()})}function B(){var b=[];if(g.length-1>e)b[0]=g[e+1];if(e>0)b[1]=g[e-1];for(var n in b){var h=b[n];if(h.rel=="modalImage"||h.href.match(w)){objNext=new Image;objNext.src=h.href}}if(g[e].rel==
"modalImage"||g[e].href.match(w)){e!==0&&a("#tbNavPrev").show().unbind().click(function(){--e;t();return false});e!==g.length-1&&a("#tbNavNext").show().unbind().click(function(){++e;t();return false})}q!=null&&a("#tbNav").hide();a(document).bind("keyup",C);k.bind("click",C);a("#tbOuter").removeClass("inProgress");a.isFunction(c.callbackOnShow)&&c.callbackOnShow(g[e]);o=false}function C(b){if(b.keyCode===27||b.button===0){A();a(document).unbind();k.unbind().empty().stop();d.stop().css({height:"250px",
width:"250px",top:"0"}).hide().removeAttr("class");a("#tbOverlay").fadeOut(c.zoomSpeedOut);a.isFunction(c.callbackOnClose)&&c.callbackOnClose(g[e]);o=false}}c=a.extend({imageScale:true,zoomOpacity:true,zoomSpeedIn:500,zoomSpeedOut:"slow",frameWidth:560,frameHeight:340,overlayShow:true,overlayOpacity:0.7,overlayColor:"#444",slideshowAutostart:false,slideshowDelay:5200,displayMeta:true,callbackOnStart:null,callbackOnShow:null,callbackOnClose:null},c);var p=this,u,y=p.length,s,g=[],e=0,o=false,q,w=/\.(jpe?g|gif|png)($|\?)?$/i,
d,k,l;return this.unbind("click").bind("click",D)}})(jQuery);
